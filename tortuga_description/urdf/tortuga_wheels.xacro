<?xml version="1.0"?>

<robot name="tortuga_motors" xmlns:xacro="http://ros.org/wiki/xacro">

  <xacro:macro name="tortuga_wheel_macro" params="name parent">
    <link name="${name}_link">
      
      <visual>
        <geometry>
          <mesh filename="package://tortuga_description/meshes/tortuga_wheel.dae"  />
        </geometry>
      </visual>
      <collision>
        <geometry>
	  
	  <cylinder radius="0.05" length="0.03"/>
	</geometry>
      </collision>
      <inertial>
	<origin xyz="0 0 0" rpy="0 0 0" />
      <mass
        value="0.1" />
      <inertia
        ixx="0.00007" ixy="0" ixz="0"
        iyy="0.00007" iyz="0"
        izz="0.000125" />
    </inertial>
    </link>
    <gazebo reference="${name}_link">
    <mu1 value="200.0"/>
    <mu2 value="100.0"/>
    <kp value="1000000.0"/>
    <kd value="1.0"/>
    <!--
    <maxVel value="100.0"/>
    <minDepth value="0.0"/>
    -->
  </gazebo>
    <!--
    -->
    <joint name="${name}_in_joint" type="fixed">
      <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
      <parent link="${parent}"/>
      <child link="${name}_link"/>
    </joint>
    
     
  </xacro:macro>  
  
  <xacro:macro name="tortuga_back_wheel_macro1" params="name parent">
    
    <!--
    <link name="${name}_hinge">
      <visual>
        <geometry>
          <mesh filename="package://tortuga_description/meshes/tortuga_front_wheel_hinge.dae"  />
        </geometry>
	</visual>
	
      <inertial>
	<origin xyz="0 0 -0.018" rpy="0 0 0" />
	<mass
	  value="0.01" />
	<inertia
	  ixx="0.0000001" ixy="0" ixz="0"
	  iyy="0.0000001" iyz="0"
	  izz="0.0000001" />
      </inertial>
    </link>
    
    <gazebo reference="${name}_hinge">
      <mu1>0.2</mu1>
      <mu2>0.2</mu2>
    </gazebo>
    <gazebo reference="${name}_hinge_joint">
      <kp>1000000000</kp>
      <kd>1000000000</kd>
    </gazebo>
    <joint name="${name}_hinge_joint" type="continuous">
      <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
      <parent link="${parent}"/>
      <child link="${name}_hinge"/>
      <axis xyz="0 0 1"/>
      <limit effort="100" velocity="200"/>
      <dynamics damping="0.0" friction="0.0"/>
    </joint>
    
    <transmission name="${name}_hinge_transmission">
        <type>transmission_interface/SimpleTransmission</type>
        <joint name="${name}_hinge_joint">
	  <hardwareInterface>EffortJointInterface</hardwareInterface>
	</joint>
        <actuator name="${name}_hinge__motor">
	  <hardwareInterface>EffortJointInterface</hardwareInterface>
            <mechanicalReduction>100</mechanicalReduction>
        </actuator>
    </transmission>
    
    
    -->
    
    
    <link name="${name}_link">
      <visual>
        <geometry>
          <mesh filename="package://tortuga_description/meshes/tortuga_front_wheel.dae"  />
        </geometry>
      </visual>
      <collision>
        <geometry>
	  
	  <cylinder radius="0.0325" length="0.056"/>
	</geometry>
      </collision>
      <inertial>
	<origin xyz="0 0 0" rpy="0 0 0" />
	<mass
	  value="0.1" />
	<inertia
	  ixx="0.00005253" ixy="0" ixz="0"
	  iyy="0.00005253" iyz="0"
	  izz="0.0000528" />
      </inertial>
    </link>
    <!--
  <gazebo reference="${name}_link">
    <mu1 value="100.0"/>
    <mu2 value="100.0"/>
    <kp value="1000000.0"/>
    <kd value="1.0"/>
    <maxVel value="100.0"/>
    <minDepth value="0.0"/>
  </gazebo>
    -->
    <joint name="${name}_wheel_joint" type="continuous">
      
        <origin xyz="-0.02 0.0 -0.06" rpy="${0.5 *PI} 0.0 0.0"/>
      <parent link="${parent}"/>
      <!--
	<origin xyz="-0.02 0.0 -0.06" rpy="${0.5 *PI} 0.0 0.0"/>
      <parent link="${name}_hinge"/>
      -->
      <!--
	<origin xyz="-0.02 0.0 -0.078" rpy="${0.5 *PI} 0.0 0.0"/>
      <parent link="${parent}"/>
      -->
      <child link="${name}_link"/>
      <axis xyz="0 0 1"/>
      <limit effort="100" velocity="200"/>
      <!--
      <dynamics damping="0.0" friction="0.0"/>
      -->
    </joint>     
    <gazebo reference="${name}_link_joint">
      <kp>1000000000</kp>
      <kd>1000000000</kd>
    </gazebo>
    
    
    
    <transmission name="${name}_wheel_transmission">
        <type>transmission_interface/SimpleTransmission</type>
        <joint name="${name}_wheel_joint">
	  <hardwareInterface>EffortJointInterface</hardwareInterface>
	</joint>
        <actuator name="${name}_wheel_motor">
	  <hardwareInterface>EffortJointInterface</hardwareInterface>
            <mechanicalReduction>100</mechanicalReduction>
        </actuator>
    </transmission>
    <!--
    <transmission name="${name}_hinge_transmission">
      <type>transmission_interface/SimpleTransmission</type>
      <joint name="${name}_hinge_joint"/>
      <actuator name="${name}_hinge_motor">
	<hardwareInterface>EffortJointInterface</hardwareInterface>
	<mechanicalReduction>1</mechanicalReduction>
      </actuator>
    </transmission>
  
    <transmission name="${name}_wheel_transmission">
      <type>transmission_interface/SimpleTransmission</type>
      <joint name="${name}_wheel_joint"/>
      <actuator name="${name}_wheel_motor">
	<hardwareInterface>EffortJointInterface</hardwareInterface>
	<mechanicalReduction>1</mechanicalReduction>
      </actuator>
    </transmission>
    -->
  </xacro:macro>  
  
  
  <xacro:macro name="tortuga_back_wheel_macro" params="name parent">
    
    <link name="${name}_hinge">
      <visual>
        <geometry>
          <mesh filename="package://tortuga_description/meshes/tortuga_front_wheel_hinge.dae"  />
        </geometry>
      </visual>
      <visual>
        
        <origin xyz="-0.02 0.0 -0.06" rpy="${0.5 *PI} 0.0 0.0"/>
        <geometry>
          <mesh filename="package://tortuga_description/meshes/tortuga_front_wheel.dae"  />
        </geometry>
      </visual>
      
      <collision>
        <origin xyz="-0.02 0.0 -0.06" rpy="${0.5 *PI} 0.0 0.0"/>
        <geometry>
          
          <sphere radius="0.0325"/>
        </geometry>
      </collision>  
      <inertial>
        <origin xyz="0 0 -0.018" rpy="0 0 0" />
        <mass
          value="0.01" />
        <inertia
          ixx="0.0000001" ixy="0" ixz="0"
          iyy="0.0000001" iyz="0"
          izz="0.0000001" />
      </inertial>
    </link>
    
    <gazebo reference="${name}_hinge">
      <mu1>0.1</mu1>
      <mu2>0.1</mu2>
    </gazebo>
    <joint name="${name}_hinge_joint" type="fixed">
      <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
      <parent link="${parent}"/>
      <child link="${name}_hinge"/>
      <axis xyz="0 0 1"/>
      <limit effort="100" velocity="200"/>
      <dynamics damping="0.0" friction="0.0"/>
    </joint>
    <!--
    <gazebo reference="${name}_hinge_joint">
      <kp>1000000000</kp>
      <kd>1000000000</kd>
    </gazebo>
    -->
    <transmission name="${name}_hinge_transmission">
        <type>transmission_interface/SimpleTransmission</type>
        <joint name="${name}_hinge_joint">
          <hardwareInterface>EffortJointInterface</hardwareInterface>
        </joint>
        <actuator name="${name}_hinge__motor">
          <hardwareInterface>EffortJointInterface</hardwareInterface>
            <mechanicalReduction>100</mechanicalReduction>
        </actuator>
    </transmission>
    
    
    
  </xacro:macro>  
</robot>